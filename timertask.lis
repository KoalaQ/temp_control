                        .module timertask.c
                        .area text(rom, con, rel)
 0000                   .dbfile timertask.c
 0000                   .dbfile E:\ICCDemo\Temp_Control\temp_control\timertask.c
 0000                   .dbfunc e Timerinit_1 _Timerinit_1 fV
 0000           ;         time_l -> R18
 0000           ;         time_h -> R16
                        .even
 0000           _Timerinit_1::
 0000                   .dbline -1
 0000                   .dbline 17
 0000           ; #include<iom128v.h>
 0000           ; #include "timertask.h"
 0000           ; #include "time.h"
 0000           ; #include "lcd.h"
 0000           ; #include "delay.h"
 0000           ; #include "main.h"
 0000           ; #include "temp.h"
 0000           ; #include "out.h"
 0000           ; unsigned char time_h_1, time_l_1,time_h_3, time_l_3,time_0, time_2,i;
 0000           ; //************************************************
 0000           ; //16位定时器，定时器1
 0000           ; //*************************************************
 0000           ; /*
 0000           ;   计数器1，16位的。普通计时，1024分频。在16M下约0.061ms计数一次。共4s钟,
 0000           ;   自行计算时间传入。传入高低八位
 0000           ; */
 0000           ; void Timerinit_1(uchar time_h,uchar time_l){
 0000                   .dbline 18
 0000           ;     time_h_1=time_h;
 0000 00930600          sts _time_h_1,R16
 0004                   .dbline 19
 0004           ;       time_l_1=time_l;
 0004 20930500          sts _time_l_1,R18
 0008                   .dbline 20
 0008           ;        TCCR1B=0x00;
 0008 2224              clr R2
 000A 2EBC              out 0x2e,R2
 000C                   .dbline 22
 000C           ;       //写入初值
 000C           ;     TCNT1H=time_h;
 000C 0DBD              out 0x2d,R16
 000E                   .dbline 23
 000E           ;     TCNT1L=time_l;
 000E 2CBD              out 0x2c,R18
 0010                   .dbline 25
 0010           ;       //普通计数，1024分频
 0010           ;     TCCR1A=0x00;
 0010 2FBC              out 0x2f,R2
 0012                   .dbline 26
 0012           ;     TCCR1B=0x05;
 0012 85E0              ldi R24,5
 0014 8EBD              out 0x2e,R24
 0016                   .dbline 27
 0016           ;        TIMSK|=0x04;//开定时器1溢出中断,16位的
 0016 87B7              in R24,0x37
 0018 8460              ori R24,4
 001A 87BF              out 0x37,R24
 001C                   .dbline -2
 001C           L1:
 001C                   .dbline 0 ; func end
 001C 0895              ret
 001E                   .dbsym r time_l 18 c
 001E                   .dbsym r time_h 16 c
 001E                   .dbend
 001E                   .dbfunc e Timerinit_3 _Timerinit_3 fV
 001E           ;         time_l -> R18
 001E           ;         time_h -> R16
                        .even
 001E           _Timerinit_3::
 001E                   .dbline -1
 001E                   .dbline 36
 001E           ; }
 001E           ; //************************************************
 001E           ; //16位定时器，定时器3
 001E           ; //*************************************************
 001E           ; /*
 001E           ;   计数器1，16位的。普通计时，1024分频。在16M下约0.061ms计数一次。共4s钟,
 001E           ;   自行计算时间传入。传入高低八位
 001E           ; */
 001E           ; void Timerinit_3(uchar time_h,uchar time_l){
 001E                   .dbline 37
 001E           ;       time_h_3=time_h;
 001E 00930400          sts _time_h_3,R16
 0022                   .dbline 38
 0022           ;       time_l_3=time_l;
 0022 20930300          sts _time_l_3,R18
 0026                   .dbline 40
 0026           ;       //写入初值
 0026           ;        TCCR3B=0x00;
 0026 2224              clr R2
 0028 20928A00          sts 138,R2
 002C                   .dbline 41
 002C           ;     TCNT3H=time_h;
 002C 00938900          sts 137,R16
 0030                   .dbline 42
 0030           ;     TCNT3L=time_l;
 0030 20938800          sts 136,R18
 0034                   .dbline 44
 0034           ;       //普通计数，1024分频
 0034           ;     TCCR3A=0x00;
 0034 20928B00          sts 139,R2
 0038                   .dbline 45
 0038           ;     TCCR3B=0x05;
 0038 85E0              ldi R24,5
 003A 80938A00          sts 138,R24
 003E                   .dbline 46
 003E           ;       ETIMSK |=0x04;//开外部中断
 003E 80917D00          lds R24,125
 0042 8460              ori R24,4
 0044 80937D00          sts 125,R24
 0048                   .dbline -2
 0048           L2:
 0048                   .dbline 0 ; func end
 0048 0895              ret
 004A                   .dbsym r time_l 18 c
 004A                   .dbsym r time_h 16 c
 004A                   .dbend
 004A                   .dbfunc e Timerinit_0 _Timerinit_0 fV
 004A           ;           time -> R16
                        .even
 004A           _Timerinit_0::
 004A                   .dbline -1
 004A                   .dbline 56
 004A           ; }
 004A           ; //************************************************
 004A           ; //8位定时器，定时器0
 004A           ; //*************************************************
 004A           ; 
 004A           ; /*
 004A           ;   计数器0，8位的。普通计时，1024分频。
 004A           ;   自行计算时间传入。
 004A           ; */
 004A           ; void Timerinit_0(uchar time){
 004A                   .dbline 57
 004A           ;     time_0=time;
 004A 00930200          sts _time_0,R16
 004E                   .dbline 59
 004E           ;       //写入初值
 004E           ;     TCNT0=time;
 004E 02BF              out 0x32,R16
 0050                   .dbline 60
 0050           ;       TIMSK|=0x01;//开定时器0溢出中断,8位的
 0050 87B7              in R24,0x37
 0052 8160              ori R24,1
 0054 87BF              out 0x37,R24
 0056                   .dbline 61
 0056           ;        TCCR0=0x07;//普通计数，1024分频
 0056 87E0              ldi R24,7
 0058 83BF              out 0x33,R24
 005A                   .dbline -2
 005A           L3:
 005A                   .dbline 0 ; func end
 005A 0895              ret
 005C                   .dbsym r time 16 c
 005C                   .dbend
 005C                   .dbfunc e Timerinit_2 _Timerinit_2 fV
 005C           ;           time -> R16
                        .even
 005C           _Timerinit_2::
 005C                   .dbline -1
 005C                   .dbline 71
 005C           ;        
 005C           ; }
 005C           ; //************************************************
 005C           ; //8位定时器，定时器2
 005C           ; //*************************************************
 005C           ; /*
 005C           ;   计数器0，8位的。普通计时，1024分频。
 005C           ;   自行计算时间传入。
 005C           ; */
 005C           ; void Timerinit_2(uchar time){
 005C                   .dbline 72
 005C           ;     time_2=time;
 005C 00930100          sts _time_2,R16
 0060                   .dbline 74
 0060           ;       //写入初值
 0060           ;     TCNT2=time;
 0060 04BD              out 0x24,R16
 0062                   .dbline 75
 0062           ;       TIMSK|=0x40;//开定时器0溢出中断,8位的
 0062 87B7              in R24,0x37
 0064 8064              ori R24,64
 0066 87BF              out 0x37,R24
 0068                   .dbline 77
 0068           ;       //普通计数，1024分频
 0068           ;     TCCR2=0x05;
 0068 85E0              ldi R24,5
 006A 85BD              out 0x25,R24
 006C                   .dbline -2
 006C           L4:
 006C                   .dbline 0 ; func end
 006C 0895              ret
 006E                   .dbsym r time 16 c
 006E                   .dbend
                        .area vector(rom, abs)
                        .org 64
 0040 0C943700          jmp _int_timer0
                        .area text(rom, con, rel)
 006E                   .dbfile E:\ICCDemo\Temp_Control\temp_control\timertask.c
 006E                   .dbfunc e int_timer0 _int_timer0 fV
                        .even
 006E           _int_timer0::
 006E 0A92              st -y,R0
 0070 1A92              st -y,R1
 0072 2A92              st -y,R2
 0074 3A92              st -y,R3
 0076 4A92              st -y,R4
 0078 5A92              st -y,R5
 007A 6A92              st -y,R6
 007C 7A92              st -y,R7
 007E 8A92              st -y,R8
 0080 9A92              st -y,R9
 0082 0A93              st -y,R16
 0084 1A93              st -y,R17
 0086 2A93              st -y,R18
 0088 3A93              st -y,R19
 008A 8A93              st -y,R24
 008C 9A93              st -y,R25
 008E AA93              st -y,R26
 0090 BA93              st -y,R27
 0092 EA93              st -y,R30
 0094 FA93              st -y,R31
 0096 0FB6              IN R0,63
 0098 0A92              st -y,R0
 009A 2197              sbiw R28,1
 009C                   .dbline -1
 009C                   .dbline 80
 009C           ; }
 009C           ; #pragma interrupt_handler int_timer0:17
 009C           ; void int_timer0(void){ 
 009C                   .dbline 81
 009C           ;               TCCR0=0x00;
 009C 2224              clr R2
 009E 23BE              out 0x33,R2
 00A0                   .dbline 82
 00A0           ;               waitflag--;
 00A0 80910000          lds R24,_waitflag
 00A4 90910100          lds R25,_waitflag+1
 00A8 0197              sbiw R24,1
 00AA 90930100          sts _waitflag+1,R25
 00AE 80930000          sts _waitflag,R24
 00B2                   .dbline 83
 00B2           ;       lcd_write_char(10,0,0x30+(waitflag/100));
 00B2 24E6              ldi R18,100
 00B4 30E0              ldi R19,0
 00B6 8C01              movw R16,R24
 00B8 0E940000          xcall div16u
 00BC C801              movw R24,R16
 00BE C096              adiw R24,48
 00C0 8883              std y+0,R24
 00C2 2227              clr R18
 00C4 0AE0              ldi R16,10
 00C6 0E940000          xcall _lcd_write_char
 00CA                   .dbline 84
 00CA           ;       lcd_write_char(11,0,'s');       
 00CA 83E7              ldi R24,115
 00CC 8883              std y+0,R24
 00CE 2227              clr R18
 00D0 0BE0              ldi R16,11
 00D2 0E940000          xcall _lcd_write_char
 00D6                   .dbline 85
 00D6           ;       if(waitflag>1){
 00D6 81E0              ldi R24,1
 00D8 90E0              ldi R25,0
 00DA 20900000          lds R2,_waitflag
 00DE 30900100          lds R3,_waitflag+1
 00E2 8215              cp R24,R2
 00E4 9305              cpc R25,R3
 00E6 20F4              brsh L5
 00E8           X0:
 00E8                   .dbline 85
 00E8                   .dbline 86
 00E8           ;          TCNT0=0x00;
 00E8 2224              clr R2
 00EA 22BE              out 0x32,R2
 00EC                   .dbline 87
 00EC           ;          TCCR0=0x07;
 00EC 87E0              ldi R24,7
 00EE 83BF              out 0x33,R24
 00F0                   .dbline 88
 00F0           ;        }
 00F0                   .dbline 89
 00F0           ;               return;
 00F0                   .dbline -2
 00F0           L5:
 00F0                   .dbline 0 ; func end
 00F0 2196              adiw R28,1
 00F2 0990              ld R0,y+
 00F4 0FBE              OUT 63,R0
 00F6 F991              ld R31,y+
 00F8 E991              ld R30,y+
 00FA B991              ld R27,y+
 00FC A991              ld R26,y+
 00FE 9991              ld R25,y+
 0100 8991              ld R24,y+
 0102 3991              ld R19,y+
 0104 2991              ld R18,y+
 0106 1991              ld R17,y+
 0108 0991              ld R16,y+
 010A 9990              ld R9,y+
 010C 8990              ld R8,y+
 010E 7990              ld R7,y+
 0110 6990              ld R6,y+
 0112 5990              ld R5,y+
 0114 4990              ld R4,y+
 0116 3990              ld R3,y+
 0118 2990              ld R2,y+
 011A 1990              ld R1,y+
 011C 0990              ld R0,y+
 011E 1895              reti
 0120                   .dbend
                        .area vector(rom, abs)
                        .org 56
 0038 0C949000          jmp _int_timer1
                        .area text(rom, con, rel)
 0120                   .dbfile E:\ICCDemo\Temp_Control\temp_control\timertask.c
 0120                   .dbfunc e int_timer1 _int_timer1 fV
                        .even
 0120           _int_timer1::
 0120 0A92              st -y,R0
 0122 1A92              st -y,R1
 0124 2A92              st -y,R2
 0126 3A92              st -y,R3
 0128 4A92              st -y,R4
 012A 5A92              st -y,R5
 012C 6A92              st -y,R6
 012E 7A92              st -y,R7
 0130 8A92              st -y,R8
 0132 9A92              st -y,R9
 0134 0A93              st -y,R16
 0136 1A93              st -y,R17
 0138 2A93              st -y,R18
 013A 3A93              st -y,R19
 013C 8A93              st -y,R24
 013E 9A93              st -y,R25
 0140 AA93              st -y,R26
 0142 BA93              st -y,R27
 0144 EA93              st -y,R30
 0146 FA93              st -y,R31
 0148 0FB6              IN R0,63
 014A 0A92              st -y,R0
 014C                   .dbline -1
 014C                   .dbline 93
 014C           ; }
 014C           ; //溢出中断。
 014C           ; #pragma interrupt_handler int_timer1:15
 014C           ; void int_timer1(void){
 014C                   .dbline 94
 014C           ;                TCCR1B=0x00;
 014C 2224              clr R2
 014E 2EBC              out 0x2e,R2
 0150                   .dbline 95
 0150           ;                out_port();
 0150 0E940000          xcall _out_port
 0154                   .dbline 96
 0154           ;               TCNT1H=time_h_1;
 0154 20900600          lds R2,_time_h_1
 0158 2DBC              out 0x2d,R2
 015A                   .dbline 97
 015A           ;          TCNT1L=time_l_1;
 015A 20900500          lds R2,_time_l_1
 015E 2CBC              out 0x2c,R2
 0160                   .dbline 98
 0160           ;                TCCR1B=0x05;
 0160 85E0              ldi R24,5
 0162 8EBD              out 0x2e,R24
 0164                   .dbline 99
 0164           ;               return;
 0164                   .dbline -2
 0164           L8:
 0164                   .dbline 0 ; func end
 0164 0990              ld R0,y+
 0166 0FBE              OUT 63,R0
 0168 F991              ld R31,y+
 016A E991              ld R30,y+
 016C B991              ld R27,y+
 016E A991              ld R26,y+
 0170 9991              ld R25,y+
 0172 8991              ld R24,y+
 0174 3991              ld R19,y+
 0176 2991              ld R18,y+
 0178 1991              ld R17,y+
 017A 0991              ld R16,y+
 017C 9990              ld R9,y+
 017E 8990              ld R8,y+
 0180 7990              ld R7,y+
 0182 6990              ld R6,y+
 0184 5990              ld R5,y+
 0186 4990              ld R4,y+
 0188 3990              ld R3,y+
 018A 2990              ld R2,y+
 018C 1990              ld R1,y+
 018E 0990              ld R0,y+
 0190 1895              reti
 0192                   .dbend
                        .area vector(rom, abs)
                        .org 40
 0028 0C94C900          jmp _int_timer2
                        .area text(rom, con, rel)
 0192                   .dbfile E:\ICCDemo\Temp_Control\temp_control\timertask.c
 0192                   .dbfunc e int_timer2 _int_timer2 fV
                        .even
 0192           _int_timer2::
 0192 0A92              st -y,R0
 0194 1A92              st -y,R1
 0196 2A92              st -y,R2
 0198 3A92              st -y,R3
 019A 4A92              st -y,R4
 019C 5A92              st -y,R5
 019E 6A92              st -y,R6
 01A0 7A92              st -y,R7
 01A2 8A92              st -y,R8
 01A4 9A92              st -y,R9
 01A6 0A93              st -y,R16
 01A8 1A93              st -y,R17
 01AA 2A93              st -y,R18
 01AC 3A93              st -y,R19
 01AE 8A93              st -y,R24
 01B0 9A93              st -y,R25
 01B2 AA93              st -y,R26
 01B4 BA93              st -y,R27
 01B6 EA93              st -y,R30
 01B8 FA93              st -y,R31
 01BA 0FB6              IN R0,63
 01BC 0A92              st -y,R0
 01BE 2197              sbiw R28,1
 01C0                   .dbline -1
 01C0                   .dbline 102
 01C0           ; }
 01C0           ; #pragma interrupt_handler int_timer2:11
 01C0           ; void int_timer2(void){
 01C0                   .dbline 104
 01C0           ;       //PORTE=~PORTE;
 01C0           ;               TCCR2=0x00;
 01C0 2224              clr R2
 01C2 25BC              out 0x25,R2
 01C4                   .dbline 105
 01C4           ;               for(i=0;i<5;i++){
 01C4 20920000          sts _i,R2
 01C8 11C0              xjmp L13
 01CA           L10:
 01CA                   .dbline 105
 01CA                   .dbline 106
 01CA           ;                lcd_write_char(0x00,3,0x30+i); 
 01CA 80910000          lds R24,_i
 01CE 805D              subi R24,208    ; addi 48
 01D0 8883              std y+0,R24
 01D2 23E0              ldi R18,3
 01D4 0027              clr R16
 01D6 0E940000          xcall _lcd_write_char
 01DA                   .dbline 107
 01DA           ;                delay_ms(100);         
 01DA 04E6              ldi R16,100
 01DC 10E0              ldi R17,0
 01DE 0E940000          xcall _delay_ms
 01E2                   .dbline 108
 01E2           ;         }
 01E2           L11:
 01E2                   .dbline 105
 01E2 80910000          lds R24,_i
 01E6 8F5F              subi R24,255    ; addi 1
 01E8 80930000          sts _i,R24
 01EC           L13:
 01EC                   .dbline 105
 01EC 80910000          lds R24,_i
 01F0 8530              cpi R24,5
 01F2 58F3              brlo L10
 01F4           X1:
 01F4                   .dbline 109
 01F4           ;               TCNT2=time_2;
 01F4 20900100          lds R2,_time_2
 01F8 24BC              out 0x24,R2
 01FA                   .dbline 110
 01FA           ;               TCCR2=0x05;
 01FA 85E0              ldi R24,5
 01FC 85BD              out 0x25,R24
 01FE                   .dbline 111
 01FE           ;               return;
 01FE                   .dbline -2
 01FE           L9:
 01FE                   .dbline 0 ; func end
 01FE 2196              adiw R28,1
 0200 0990              ld R0,y+
 0202 0FBE              OUT 63,R0
 0204 F991              ld R31,y+
 0206 E991              ld R30,y+
 0208 B991              ld R27,y+
 020A A991              ld R26,y+
 020C 9991              ld R25,y+
 020E 8991              ld R24,y+
 0210 3991              ld R19,y+
 0212 2991              ld R18,y+
 0214 1991              ld R17,y+
 0216 0991              ld R16,y+
 0218 9990              ld R9,y+
 021A 8990              ld R8,y+
 021C 7990              ld R7,y+
 021E 6990              ld R6,y+
 0220 5990              ld R5,y+
 0222 4990              ld R4,y+
 0224 3990              ld R3,y+
 0226 2990              ld R2,y+
 0228 1990              ld R1,y+
 022A 0990              ld R0,y+
 022C 1895              reti
 022E                   .dbend
                        .area vector(rom, abs)
                        .org 116
 0074 0C941701          jmp _int_timer3
                        .area text(rom, con, rel)
 022E                   .dbfile E:\ICCDemo\Temp_Control\temp_control\timertask.c
 022E                   .dbfunc e int_timer3 _int_timer3 fV
                        .even
 022E           _int_timer3::
 022E 0A92              st -y,R0
 0230 1A92              st -y,R1
 0232 2A92              st -y,R2
 0234 3A92              st -y,R3
 0236 4A92              st -y,R4
 0238 5A92              st -y,R5
 023A 6A92              st -y,R6
 023C 7A92              st -y,R7
 023E 8A92              st -y,R8
 0240 9A92              st -y,R9
 0242 0A93              st -y,R16
 0244 1A93              st -y,R17
 0246 2A93              st -y,R18
 0248 3A93              st -y,R19
 024A 8A93              st -y,R24
 024C 9A93              st -y,R25
 024E AA93              st -y,R26
 0250 BA93              st -y,R27
 0252 EA93              st -y,R30
 0254 FA93              st -y,R31
 0256 0FB6              IN R0,63
 0258 0A92              st -y,R0
 025A                   .dbline -1
 025A                   .dbline 115
 025A           ; }
 025A           ; //16位定时器，定时器3溢出中断。
 025A           ; #pragma interrupt_handler int_timer3:30
 025A           ; void int_timer3(void){
 025A                   .dbline 116
 025A           ;       TCCR3B=0x00;
 025A 2224              clr R2
 025C 20928A00          sts 138,R2
 0260                   .dbline 117
 0260           ;       tempcontrol();//执行温度调节
 0260 0E940000          xcall _tempcontrol
 0264                   .dbline 118
 0264           ;         TCNT3H=time_h_3;
 0264 20900400          lds R2,_time_h_3
 0268 20928900          sts 137,R2
 026C                   .dbline 119
 026C           ;       TCNT3L=time_l_3;
 026C 20900300          lds R2,_time_l_3
 0270 20928800          sts 136,R2
 0274                   .dbline 120
 0274           ;       TCCR3B=0x05;
 0274 85E0              ldi R24,5
 0276 80938A00          sts 138,R24
 027A                   .dbline -2
 027A           L14:
 027A                   .dbline 0 ; func end
 027A 0990              ld R0,y+
 027C 0FBE              OUT 63,R0
 027E F991              ld R31,y+
 0280 E991              ld R30,y+
 0282 B991              ld R27,y+
 0284 A991              ld R26,y+
 0286 9991              ld R25,y+
 0288 8991              ld R24,y+
 028A 3991              ld R19,y+
 028C 2991              ld R18,y+
 028E 1991              ld R17,y+
 0290 0991              ld R16,y+
 0292 9990              ld R9,y+
 0294 8990              ld R8,y+
 0296 7990              ld R7,y+
 0298 6990              ld R6,y+
 029A 5990              ld R5,y+
 029C 4990              ld R4,y+
 029E 3990              ld R3,y+
 02A0 2990              ld R2,y+
 02A2 1990              ld R1,y+
 02A4 0990              ld R0,y+
 02A6 1895              reti
 02A8                   .dbend
                        .area bss(ram, con, rel)
 0000                   .dbfile E:\ICCDemo\Temp_Control\temp_control\timertask.c
 0000           _i::
 0000                   .blkb 1
 0001                   .dbsym e i _i c
 0001           _time_2::
 0001                   .blkb 1
 0002                   .dbsym e time_2 _time_2 c
 0002           _time_0::
 0002                   .blkb 1
 0003                   .dbsym e time_0 _time_0 c
 0003           _time_l_3::
 0003                   .blkb 1
 0004                   .dbsym e time_l_3 _time_l_3 c
 0004           _time_h_3::
 0004                   .blkb 1
 0005                   .dbsym e time_h_3 _time_h_3 c
 0005           _time_l_1::
 0005                   .blkb 1
 0006                   .dbsym e time_l_1 _time_l_1 c
 0006           _time_h_1::
 0006                   .blkb 1
 0007                   .dbsym e time_h_1 _time_h_1 c
 0007           ; }
